<!DOCTYPE html><html lang="en" dir="ltr"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><title>New Visit</title><style>:root{--glass-bg:rgba(255,255,255,.12);--glass-bg-hover:rgba(255,255,255,.22);--danger:#ff5252;--ok:#22c55e}*{box-sizing:border-box}body{min-height:100vh;margin:0;padding:20px;display:flex;flex-direction:column;justify-content:center;align-items:center;background:radial-gradient(circle at top,#00c6ff 0,#007aff 45%,#001b4d 100%);color:#fff;font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif}h1{font-size:2.4rem;font-weight:700;margin:0 0 18px;text-shadow:0 10px 25px rgba(0,0,0,.3);text-align:center;animation:fadeInDown .8s ease}form{width:100%;max-width:560px;background:var(--glass-bg);border-radius:18px;padding:20px 20px 22px;box-shadow:0 18px 45px rgba(0,0,0,.45);backdrop-filter:blur(16px);border:1px solid rgba(255,255,255,.25);animation:fadeInUp .9s ease;position:relative;overflow:hidden}label{display:block;font-weight:600;margin:12px 6px 6px;font-size:.92rem}.req{opacity:.9}input[type=text],input[type=tel],input[type=file],select{width:100%;padding:10px 10px;border-radius:10px;border:1px solid rgba(255,255,255,.28);outline:none;background:rgba(5,28,70,.5);color:#fff;font-size:.95rem;transition:all .2s ease}input::placeholder{color:rgba(255,255,255,.55)}select{cursor:pointer}input[type=text]:focus,input[type=tel]:focus,input[type=file]:focus,select:focus{border-color:#fff;box-shadow:0 0 0 1px rgba(255,255,255,.55);background:rgba(5,28,70,.75)}.row{display:flex;flex-direction:column;gap:10px 16px}.row>div{flex:1;min-width:0}@media (min-width:640px){.row{flex-direction:row}}.error{color:#ffd0d0;font-size:.78rem;margin:4px 6px 0;display:none}.error.show{display:block}input.invalid,select.invalid{border-color:var(--danger);box-shadow:0 0 0 1px rgba(255,82,82,.6)}button[type=submit]{width:100%;margin-top:16px;padding:11px 10px;border-radius:999px;border:none;background:linear-gradient(135deg,#16a34a,#22c55e);color:#f9fff9;font-weight:700;font-size:1rem;cursor:pointer;box-shadow:0 12px 28px rgba(0,0,0,.45);transition:transform .15s ease,box-shadow .15s ease,filter .15s ease}button[type=submit]:hover:not(:disabled){transform:translateY(-1px);filter:brightness(1.05);box-shadow:0 16px 38px rgba(0,0,0,.55)}button[type=submit]:disabled{opacity:.6;cursor:wait;box-shadow:none}.hint{font-size:.78rem;opacity:.85;margin:4px 6px 0}#toast{position:fixed;left:50%;bottom:24px;transform:translateX(-50%) translateY(100%);background:rgba(15,23,42,.96);color:#f9fafb;padding:10px 16px;border-radius:999px;box-shadow:0 16px 35px rgba(0,0,0,.5);font-size:.9rem;opacity:0;pointer-events:none;transition:all .25s ease;z-index:999;max-width:90%;text-align:center}#toast.show{opacity:1;transform:translateX(-50%) translateY(0)}.checkmark{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;opacity:0;pointer-events:none;transition:opacity .25s ease}.checkmark.show{opacity:1}.checkmark svg{width:72px;height:72px;filter:drop-shadow(0 12px 25px rgba(0,0,0,.6))}#confettiCanvas{position:fixed;inset:0;pointer-events:none;z-index:500}.form-success{box-shadow:0 0 0 1px rgba(34,197,94,.6),0 18px 45px rgba(0,0,0,.5);animation:successPulse 1.1s ease-out}@keyframes successPulse{0%{box-shadow:0 0 0 0 rgba(34,197,94,0)}40%{box-shadow:0 0 0 12px rgba(34,197,94,.35)}100%{box-shadow:0 0 0 0 rgba(34,197,94,0)}}@keyframes fadeInDown{from{opacity:0;transform:translateY(-18px)}to{opacity:1;transform:translateY(0)}}@keyframes fadeInUp{from{opacity:0;transform:translateY(18px)}to{opacity:1;transform:translateY(0)}}</style></head><body><h1>Welcome</h1><canvas id="confettiCanvas"></canvas><form id="visit-form" novalidate><div class="row"><div><label for="fullName">Full Name <span class="req">*</span></label><input id="fullName" name="fullName" type="text" placeholder="Full Name" autocomplete="name" required/><div id="errName" class="error">Please enter a valid full name (3 characters or more).</div></div><div><label for="passport">Passport Number <span class="req">*</span></label><input id="passport" name="passport" type="text" pattern="[A-Za-z0-9]{6,12}" placeholder="Passport Number" required/><div id="errPass" class="error">Passport must be 6‚Äì12 letters or digits (A‚ÄìZ, 0‚Äì9).</div></div></div><div class="row"><div><label for="countryCode">Country Code <span class="req">*</span></label><select id="countryCode" name="countryCode" required><option value="+212" selected>üá≤üá¶ Morocco (+212)</option><option value="+216">üáπüá≥ Tunisia (+216)</option></select></div><div><label for="phone">Phone Number <span class="req">*</span></label><input id="phone" name="phone" type="tel" placeholder="612345678" autocomplete="tel" required/><div id="errPhone" class="error">Please enter a valid phone number (digits only).</div><div class="hint">Write the number without the country code (it will be added automatically).</div></div></div><div class="row"><div><label for="address">Address <span class="req">*</span></label><input id="address" name="address" type="text" placeholder="Street, building..." autocomplete="street-address" required/><div id="errAddress" class="error">Please enter a valid address.</div></div><div><label for="postcode">Postcode / ZIP code <span class="req">*</span></label><input id="postcode" name="postcode" type="text" placeholder="Postcode / ZIP" required/><div id="errPostcode" class="error">Please enter a valid postcode / ZIP code.</div></div></div><div class="row"><div><label for="city">City <span class="req">*</span></label><input id="city" name="city" type="text" placeholder="City" required/><div id="errCity" class="error">Please enter a valid city.</div></div><div><label for="state">State / Country <span class="req">*</span></label><select id="state" name="state" required><option value="">Select</option><option value="Morocco">üá≤üá¶ Morocco</option><option value="Tunisia">üáπüá≥ Tunisia</option></select><div id="errState" class="error">Please select your state / country.</div></div></div><label for="pdf">Passport File <span class="req">*</span></label><input id="pdf" name="pdf" type="file" accept="application/pdf,image/*" required/><div id="errFile" class="error">Please upload a PDF, JPG, PNG or WebP file up to 20MB.</div><div class="hint">Accepted: PDF, JPG, PNG, WebP (max 20MB).</div><button id="sendBtn" type="submit">Send</button><div class="checkmark" id="checkmark"><svg viewBox="0 0 52 52"><circle cx="26" cy="26" r="25" fill="#22c55e"/><path d="M14 27l7 7 17-17" fill="none" stroke="#fff" stroke-width="3.5" stroke-linecap="round" stroke-linejoin="round"/></svg></div></form><div id="toast"></div><script>const API_ENDPOINT="https://api.mehdik.site/",form=document.getElementById("visit-form"),sendBtn=document.getElementById("sendBtn"),toastEl=document.getElementById("toast"),checkmarkEl=document.getElementById("checkmark"),confettiCanvas=document.getElementById("confettiCanvas"),ctx=confettiCanvas.getContext("2d"),nameInput=document.getElementById("fullName"),passInput=document.getElementById("passport"),ccInput=document.getElementById("countryCode"),phoneInput=document.getElementById("phone"),addressInput=document.getElementById("address"),postcodeInput=document.getElementById("postcode"),cityInput=document.getElementById("city"),stateInput=document.getElementById("state"),fileInput=document.getElementById("pdf"),errName=document.getElementById("errName"),errPass=document.getElementById("errPass"),errPhone=document.getElementById("errPhone"),errAddress=document.getElementById("errAddress"),errPostcode=document.getElementById("errPostcode"),errCity=document.getElementById("errCity"),errState=document.getElementById("errState"),errFile=document.getElementById("errFile");function showToast(e){toastEl.textContent=e,toastEl.classList.add("show"),setTimeout(()=>toastEl.classList.remove("show"),2600)}function validate(){let e=!0;function t(e,t){e.classList.remove("invalid"),t.classList.remove("show")}function a(t,a){t.classList.add("invalid"),a.classList.add("show"),e=!1}t(nameInput,errName),t(passInput,errPass),t(ccInput,errPhone),t(phoneInput,errPhone),t(addressInput,errAddress),t(postcodeInput,errPostcode),t(cityInput,errCity),t(stateInput,errState),t(fileInput,errFile);const n=(nameInput.value||"").trim();n.length<3&&a(nameInput,errName);const r=(passInput.value||"").trim(),i=/^[A-Za-z0-9]{6,12}$/;i.test(r)||a(passInput,errPass);const o=(ccInput.value||"").trim(),l=/^\+\d{1,4}$/;l.test(o)||a(ccInput,errPhone);let d=(phoneInput.value||"").trim().replace(/\s+/g,""),s=/^\d{6,15}$/;s.test(d)||a(phoneInput,errPhone);const c=(addressInput.value||"").trim();c.length<5&&a(addressInput,errAddress);const u=(postcodeInput.value||"").trim(),m=/^[A-Za-z0-9\- ]{3,12}$/;m.test(u)||a(postcodeInput,errPostcode);const p=(cityInput.value||"").trim();p.length<2&&a(cityInput,errCity);const f=(stateInput.value||"").trim();f||a(stateInput,errState);const v=fileInput.files[0];if(!v)a(fileInput,errFile);else{const g=["application/pdf","image/jpeg","image/png","image/webp"];(!g.includes(v.type)||v.size>20971520)&&a(fileInput,errFile)}return e}async function sendToServer(e){const t=new FormData(e),a=(ccInput.value||"").trim();let n=(phoneInput.value||"").trim().replace(/\s+/g,"");t.append("fullPhone",a+" "+n);const r=await fetch(API_ENDPOINT,{method:"POST",body:t});let i=null;try{i=await r.json()}catch(e){throw new Error("Invalid response from server.")}if(!r.ok||!i.ok)throw new Error(i&&i.error?i.error:"Server returned an error")}let confettiPieces=[];function resizeCanvas(){confettiCanvas.width=window.innerWidth,confettiCanvas.height=window.innerHeight}function spawnConfetti(){confettiPieces=[];for(let e=0;e<140;e++)confettiPieces.push({x:Math.random()*confettiCanvas.width,y:Math.random()*confettiCanvas.height-confettiCanvas.height,w:5+Math.random()*5,h:8+Math.random()*8,vy:2+Math.random()*4,rot:Math.random()*Math.PI*2,vr:(Math.random()-.5)*.2})}function drawConfetti(){ctx.clearRect(0,0,confettiCanvas.width,confettiCanvas.height),confettiPieces.forEach(e=>{e.y+=e.vy,e.rot+=e.vr,e.y-e.h>confettiCanvas.height&&(e.y=-e.h);const t=140+e.x/confettiCanvas.width*140;ctx.save(),ctx.translate(e.x,e.y),ctx.rotate(e.rot),ctx.fillStyle=`hsl(${t}, 80%, 60%)`,ctx.fillRect(-e.w/2,-e.h/2,e.w,e.h),ctx.restore()})}let confettiAnim=null;function runConfetti(e=1800){spawnConfetti();const t=performance.now();function a(n){const r=n-t;drawConfetti(),r<e?(confettiAnim=requestAnimationFrame(a)):(ctx.clearRect(0,0,confettiCanvas.width,confettiCanvas.height),confettiAnim=null)}confettiAnim&&cancelAnimationFrame(confettiAnim),confettiAnim=requestAnimationFrame(a)}function successFX(){form.classList.add("form-success"),checkmarkEl.classList.add("show"),runConfetti(),setTimeout(()=>{form.classList.remove("form-success"),checkmarkEl.classList.remove("show")},1800)}window.addEventListener("resize",resizeCanvas),resizeCanvas(),form.addEventListener("submit",async e=>{e.preventDefault();if(!validate()){showToast("‚ö†Ô∏è Please check your inputs and try again.");return}try{sendBtn.disabled=!0,sendBtn.textContent="Sending‚Ä¶",await sendToServer(form),showToast("‚úÖ Sent successfully."),successFX(),form.reset()}catch(e){console.error(e),showToast("‚ùå Sending failed. Try again later.")}finally{sendBtn.disabled=!1,sendBtn.textContent="Send"}});</script></body></html>
